{# templates/components/social_feed.twig #}

<div class="social-feed">
    <h2>Mur Social</h2>
    {# Je crée un formulaire pour ajouter un nouveau post en utilisant le formulaire PostType #}
    {{ form_start(postForm) }}
        {{ form_row(postForm.content, {'attr': {'class': 'form-control', 'placeholder': 'Écrivez quelque chose...'}}) }}
        {{ form_row(postForm.visibility, {'attr': {'class': 'form-control'}}) }}
        <button type="submit" class="btn btn-primary">Publier</button>
    {{ form_end(postForm) }}

    {# Je boucle sur chaque post pour les afficher #}
    <div class="posts">
        {% for post in posts %}
            <div class="post">
                <div class="post-content">
                    {{ post.content }}
                </div>
                <div class="post-metadata">
                    <span class="post-date">{{ post.createdAt|date('d/m/Y H:i') }}</span>
                    {# J'ajoute des boutons pour éditer et supprimer les posts si l'utilisateur est autorisé #}
                    <div class="post-actions">
                        <a href="{{ path('edit_post', {'id': post.id}) }}" class="btn btn-sm btn-secondary">Éditer</a>
                        <a href="{{ path('delete_post', {'id': post.id}) }}" class="btn btn-sm btn-danger" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce post ?');">Supprimer</a>
                    </div>
                </div>
            </div>
        {% else %}
            <p>Aucun post à afficher.</p>
        {% endfor %}
    </div>
</div>
